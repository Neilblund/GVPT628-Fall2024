<!DOCTYPE html>
<html lang="en"><head>
<script src="10_Text_Analysis_2_files/libs/clipboard/clipboard.min.js"></script>
<script src="10_Text_Analysis_2_files/libs/quarto-html/tabby.min.js"></script>
<script src="10_Text_Analysis_2_files/libs/quarto-html/popper.min.js"></script>
<script src="10_Text_Analysis_2_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="10_Text_Analysis_2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="10_Text_Analysis_2_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="10_Text_Analysis_2_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="10_Text_Analysis_2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="10_Text_Analysis_2_files/libs/quarto-contrib/reveal-header-1.0.0/add_header.js" defer="true"></script>
<link href="10_Text_Analysis_2_files/libs/quarto-contrib/reveal-header-1.0.0/add_header.css" rel="stylesheet">
<link href="10_Text_Analysis_2_files/libs/quarto-contrib/grid-htext-1.0.0/grid_htext.css" rel="stylesheet">
<script src="10_Text_Analysis_2_files/libs/quarto-contrib/pseudocode-2.4.1/pseudocode.min.js"></script>
<link href="10_Text_Analysis_2_files/libs/quarto-contrib/pseudocode-2.4.1/pseudocode.min.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.554">

  <title>Text Analysis Part 2</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="10_Text_Analysis_2_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="10_Text_Analysis_2_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="10_Text_Analysis_2_files/libs/revealjs/dist/theme/quarto.css">
  <link href="10_Text_Analysis_2_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="10_Text_Analysis_2_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="10_Text_Analysis_2_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="10_Text_Analysis_2_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="10_Text_Analysis_2_files/libs/kePrint-0.0.1/kePrint.js"></script>

  <link href="10_Text_Analysis_2_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script>
  MathJax = {
    loader: {
      load: ['[tex]/boldsymbol']
    },
    tex: {
      tags: "all",
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      packages: {
        '[+]': ['boldsymbol']
      }
    }
  };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Text Analysis Part 2</h1>

<div class="quarto-title-authors">
</div>

</section>
<section class="slide level3">

<div class="cell">
<style type="text/css">
.output {
max-height: 500px;
overflow-y: scroll;
}
</style>
</div>
</section>
<section>
<section id="topic-modeling" class="title-slide slide level1 center">
<h1>Topic modeling</h1>
<p>What are these documents “about”?’</p>
<div class="columns">
<div class="column" style="width:50%;">
<blockquote>
<p>The capitalist ruling class has no religion, no ideals, and no illusion. It is cynical and unbelieving because it denies the real base of human society, the complete emancipation of the working class. Bourgeois society, by its very nature of interested professionalism, must maintain centers of authority and exploitation, called States.</p>
</blockquote>
</div><div class="column" style="width:50%;">
<blockquote>
<p>Mothra’s origins have somewhat varied from film to film, but she is always portrayed as a benevolent and ancient creature that possesses some level of divinity. In the Showa era… Mothra is the guardian goddess of the remote Infant Island in the south Pacific Ocean. There, she is perpetually reborn through an egg and is worshiped by the island’s natives. She is spoken for by two miniature telepathic fairies…</p>
</blockquote>
</div>
</div>
</section>
<section id="lda" class="title-slide slide level2 center">
<h2>LDA</h2>
<ul>
<li><p>Topic models are an <strong>unsupervised</strong> method for summarizing the contents of a corpus.</p></li>
<li><p>Can help to answer the questions:</p>
<ul>
<li>What terms are associated with each other in the corpus?</li>
<li>What is each document “about”? What are the ideas expressed in each one?</li>
</ul></li>
<li><p>Topic models also give us a low-dimensional representation of documents. So they can also help with that sparsity/high dimensional problem mentioned above.</p></li>
<li><p>The most widely used topic modeling approach is called Latent Dirichlet Allocation (LDA)</p></li>
</ul>
</section>

<section id="latent-variables" class="title-slide slide level2 center">
<h2>Latent Variables</h2>
<ul>
<li><p><strong>Latent</strong> variable models assume there is a random unobserved generative process that gives us our observed data. Our goal is to use the observed data to infer properties of the latent variable.</p></li>
<li><p>In a topic model, we want to infer two latent Dirichlet distributions <span class="math inline">\(\phi\)</span> and <span class="math inline">\(\theta\)</span> that were most likely to have generated our collection of documents.</p></li>
</ul>

<img data-src="https://upload.wikimedia.org/wikipedia/commons/4/4d/Smoothed_LDA.png" class="r-stretch"></section>

<section id="the-dirichlet-distribution" class="title-slide slide level2 center">
<h2>The Dirichlet Distribution</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>The Dirichlet distribution is the the multivariate version of a Beta Distribution</p>
<ul>
<li><p>If you have a trial with two outcomes, the probability of success and failure are described by a beta distribution (the outcomes are described by a binomial)</p></li>
<li><p>If you have a trial with multiple outcomes the probabilities of success or failure are described by a Dirichlet distribution.</p></li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<p>So, if I have five outcomes, I can sample from a random Dirichlet distribution to simulate some probabilities for each one of those outcomes occurring:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">library</span>(gtools)</span>
<span id="cb1-2"><a href=""></a>outcomes <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb1-3"><a href=""></a>dispersion <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb1-4"><a href=""></a><span class="co"># a single draw from the dirichlet:</span></span>
<span id="cb1-5"><a href=""></a><span class="fu">rdirichlet</span>(<span class="dv">1</span>, <span class="fu">rep</span>(dispersion, outcomes))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]       [,2]      [,3]      [,4]         [,5]
[1,] 0.3015876 0.01440414 0.5355434 0.1483258 0.0001390675</code></pre>
</div>
</div>
</div>
</div>
</section>

<section id="phi" class="title-slide slide level2 center">
<h2>Phi</h2>
<ul>
<li><p>A “topic” in the context of topic modeling, is a Dirichlet distribution that generates words.</p>
<table>
<thead>
<tr class="header">
<th>Term</th>
<th>Topic 1</th>
<th>Topic 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Bourgeosie</td>
<td>.7</td>
<td>.02</td>
</tr>
<tr class="even">
<td>Revolution</td>
<td>.298</td>
<td>.001</td>
</tr>
<tr class="odd">
<td>Godzilla</td>
<td>.001</td>
<td>.379</td>
</tr>
<tr class="even">
<td>Telephathic Faeries</td>
<td>.001</td>
<td>.6</td>
</tr>
</tbody>
</table>
<p>The matrix of topic-word probabilities generated by a topic model with often be called <span class="math inline">\(\phi\)</span> (phi)</p></li>
</ul>
</section>

<section id="theta" class="title-slide slide level2 center">
<h2>Theta</h2>
<ul>
<li><p>Similarly, each “document” has its own latent Dirichlet distribution that determines the probability of a topic occurring in that document.</p></li>
<li><p>Documents by Mikhail Bakunin have a low probability of drawing from the “Kaiju” topic and a high probability of drawing from the “anarchist philosophy” topic.</p></li>
</ul>
<table>
<thead>
<tr class="header">
<th><strong>Topic</strong></th>
<th>Mikhail Bakunin</th>
<th>Kaijupedia: the Kaiju Encyclopedia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Topic 1</td>
<td>.9</td>
<td>.1</td>
</tr>
<tr class="even">
<td>Topic 2</td>
<td>.2</td>
<td>.8</td>
</tr>
</tbody>
</table>
<p>The matrix of document-topic probabilities generated by a topic model usually be called <span class="math inline">\(\theta\)</span> (theta)</p>
</section>

<section id="the-lda-generative-model" class="title-slide slide level2 center">
<h2>The LDA Generative Model</h2>
<div class="pseudocode-container quarto-float" data-line-number="true" data-caption-prefix="Algorithm" data-line-number-punc=":" data-pseudocode-number="1" data-comment-delimiter="//" data-no-end="false" data-indent-size="1.2em">
<div class="pseudocode">
\begin{algorithm} \caption{LDA Generative Model} \begin{algorithmic} \Procedure{LDA}{} \State 1. Choose $\theta \sim \text{Dir}(\alpha)$ (document-topic probabilities) \State 2. Choose $\phi \sim \text{Dir}(\beta)$ (topic-word probabilities) \For{each document $d$} \For{each word $w_{d,i}$} \State Sample a topic $ k \sim \text{Categorical}(\theta_{d})$ \State Sample a word $ w_{d,i} \sim \text{Categorical}(\phi_{k})$ \EndFor \EndFor \EndProcedure \end{algorithmic} \end{algorithm}
</div>
</div>
<p>In other words: Bakunin writes by sampling a topic from the “topics” distribution, and then by sampling a word from that selected topic. Then repeat until you have an essay.</p>
</section>

<section id="inference" class="title-slide slide level2 center scrollable">
<h2>Inference</h2>
<p>Two primary methods for inferring <span class="math inline">\(\theta\)</span> and <span class="math inline">\(\phi\)</span></p>
<ol type="1">
<li><p>Gibbs Sampling starts with randomly assigning words to topics, calculating <span class="math inline">\(\phi\)</span> and <span class="math inline">\(\theta\)</span> and then resampling each <span class="math inline">\(w_{i,j}\)</span> until “convergence”.</p></li>
<li><p>Variational Bayes works by approximating the posterior using a similar but simpler distribution.</p></li>
</ol>
<div class="fragment">
<p>The main practical difference here is that Gibbs sampling is non-deterministic, so you can have small random differences for different runs of the same model + data.</p>
<p>(VB is also noticeably faster in most cases)</p>
</div>
</section>

<section id="example" class="title-slide slide level2 center">
<h2>Example</h2>
<p>Using pre-cleaned data from the scraped CNN/Fox news articles <a href="https://github.com/Neilblund/APAN/raw/main/news_sample.csv">here</a>.</p>
<ul>
<li><p>Tokenized</p></li>
<li><p>Removed punctuation</p></li>
<li><p>Removed stopwords</p></li>
<li><p>Stemmed (but some sources recommend against this!)</p></li>
<li><p>No weights applied</p></li>
</ul>
</section>

<section id="example-1" class="title-slide slide level2 center">
<h2>Example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="fu">library</span>(seededlda) <span class="co"># package for both seeded LDA and regular LDA</span></span>
<span id="cb3-2"><a href=""></a><span class="fu">library</span>(LDAvis) <span class="co"># for visualization </span></span>
<span id="cb3-3"><a href=""></a><span class="co"># number of topics: </span></span>
<span id="cb3-4"><a href=""></a>K<span class="ot">&lt;-</span><span class="dv">15</span></span>
<span id="cb3-5"><a href=""></a><span class="co"># the initialization is random, so set the random number seed for replicability </span></span>
<span id="cb3-6"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb3-7"><a href=""></a>lda_model<span class="ot">&lt;-</span><span class="fu">textmodel_lda</span>(pol_dfm, </span>
<span id="cb3-8"><a href=""></a>                         <span class="at">k =</span> K, </span>
<span id="cb3-9"><a href=""></a>              <span class="at">max_iter=</span><span class="dv">2000</span>, </span>
<span id="cb3-10"><a href=""></a>              <span class="at">auto_iter =</span> T,</span>
<span id="cb3-11"><a href=""></a>              <span class="co"># raising this result in more uniform theta</span></span>
<span id="cb3-12"><a href=""></a>              <span class="at">alpha =</span> <span class="fl">0.1</span>,</span>
<span id="cb3-13"><a href=""></a>              <span class="co">#raising this will result in a more uniform phi</span></span>
<span id="cb3-14"><a href=""></a>              <span class="at">beta =</span> <span class="fl">0.01</span>)</span>
<span id="cb3-15"><a href=""></a></span>
<span id="cb3-16"><a href=""></a><span class="co"># save for future use</span></span>
<span id="cb3-17"><a href=""></a><span class="fu">saveRDS</span>(lda_model, <span class="st">'lda_model.rds'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><p><code>alpha</code> and <code>beta</code> are hyper-parameters for <span class="math inline">\(\theta\)</span> and <span class="math inline">\(\phi\)</span>, respectively.</p>
<ul>
<li>Placing a higher value for alpha will make the documents have a more even distribution of topics. Placing a lower value will make the documents more concentrated around a just one or two.</li>
</ul></li>
<li><p><code>k</code> is the number of topics. This is mostly a matter of personal judgement! Although there are some metrics we can use to choose an optimal value, its not an exact science.</p></li>
<li><p><code>max_iter</code> is the number of iterations to run for Gibbs sampling.</p></li>
</ul>
</div>
</div>
</section>

<section id="interpretation" class="title-slide slide level2 center">
<h2>Interpretation</h2>
<p><span class="math inline">\(\phi\)</span> will be W x K matrix (or K x W) of words and topics. The number in each cell represents the probability of term w occurring in topic k:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a><span class="co"># K topics W words</span></span>
<span id="cb4-2"><a href=""></a><span class="fu">dim</span>(lda_model<span class="sc">$</span>phi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   15 6343</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="co"># top 10 most likely words for topic 1:</span></span>
<span id="cb6-2"><a href=""></a><span class="fu">sort</span>(lda_model<span class="sc">$</span>phi[<span class="dv">1</span>,], <span class="at">decreasing=</span>T)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ukraine       russia      russian        putin    ukrainian         nato 
  0.08587136   0.06870853   0.05675686   0.03058779   0.02537663   0.01665361 
     weapons     invasion    sanctions intelligence 
  0.01642704   0.01512425   0.01427460   0.01104595 </code></pre>
</div>
</div>
<p>Interpretation is sometimes as much of an art as a science. Topics don’t have labels, but we should be able to infer a “main idea” by looking at terms associated with each one.</p>
</section>
<section id="interpreting-phi" class="slide level3">
<h3>Interpreting Phi</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>Notice that most topics will have synonymous terms grouped together. How??</p>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="10_Text_Analysis_2_files/figure-revealjs/unnamed-chunk-7-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="interpreting-phi-1" class="slide level3">
<h3>Interpreting Phi</h3>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Probability</a></li><li><a href="#tabset-1-2">Probability with inverse weighting by frequency</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>In some cases, the “high probability” terms will be swamped by words that are just common in the corpus overall. So we sometimes try to downweight common terms</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="10_Text_Analysis_2_files/figure-revealjs/unnamed-chunk-8-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="10_Text_Analysis_2_files/figure-revealjs/unnamed-chunk-9-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="interpreting-theta" class="slide level3">
<h3>Interpreting Theta</h3>
<p><span class="math inline">\(\theta\)</span> will be a D x K matrix where each cell represents the probability of topic K in document D.</p>
<p>::: columns ::: {.column width=“50%”}</p>
<p>It may be interesting to look at the frequency of each topic, or look at how topic frequencies relate to other known document characteristics (for instance: do some sources mention topics more frequently than others?)</p>

<img data-src="10_Text_Analysis_2_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch"><p>:::</p>
<p>::: {.column width=“50%”} We can also use <span class="math inline">\(\theta\)</span> to identify some documents with a high probability of a given topic and read them to get a better sense of what the topic represents.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table lightable-paper lightable-striped" data-quarto-postprocess="true" style="font-size: 10px; margin-left: auto; margin-right: auto; font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">topic</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">terms</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">documents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">topic 01</td>
<td style="text-align: left;">ukraine, russia, russian, putin, ukrainian</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/defense-secretary-austin-russia-war-crimes">Defense Secretary Austin stops short of accusing Russia of war crimes</a><br>
<a href="https://www.foxnews.com/politics/zelenskyy-europe-nato-sanctions-more-options">Ukraine's Zelenskyy presses European leaders for stronger sanctions, ban on Russia from banking system</a><br>
<a href="https://www.cnn.com/2023/05/08/politics/ukraine-aid-package-counteroffensive/index.html">US announces $1.2 billion aid package to Ukraine with counteroffensive looming</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">topic 10</td>
<td style="text-align: left;">china, chinese, iran, visit, taiwan</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2023/05/18/politics/us-china-washington-wang-wentao-intl/index.html">Chinese commerce minister to meet US counterpart in Washington next week</a><br>
<a href="https://www.foxnews.com/politics/us-reaches-preliminary-agreement-saudi-arabia-recognize-israel-report">US reaches preliminary agreement for Saudi Arabia to recognize Israel: report</a><br>
<a href="https://www.cnn.com/2022/11/11/politics/joe-biden-cambodia-asean/index.html">Biden arrives in Cambodia looking to counter China’s growing influence in Southeast Asia</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">topic 11</td>
<td style="text-align: left;">protests, violence, greene, video, violent</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/mcenany-calls-reporters-question-absurd-trump-believes-good-south-lost-civil-war">McEnany calls reporter’s question ‘absurd’ when asked if Trump believes it's good South lost the Civil War</a><br>
<a href="https://www.foxnews.com/politics/tom-cotton-dismisses-dems-who-blame-violence-on-trump">Tom Cotton on Dems blaming Trump for violence: ’I don’t think those were Trump supporters’ in streets</a><br>
<a href="https://www.foxnews.com/politics/trump-signs-executive-order-to-protect-american-monuments">Trump signs executive order to protect American monuments, memorials and statues</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">topic 12</td>
<td style="text-align: left;">gun, mail, michigan, pennsylvania, arizona</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2020/08/28/politics/illinois-mail-ballots-1-million/index.html">More than 1 million Illinois voters have requested mail-in ballots</a><br>
<a href="https://www.cnn.com/2022/07/05/politics/arizona-election-law-justice-department/index.html">Justice Department sues Arizona over new election law requiring proof of citizenship</a><br>
<a href="https://www.cnn.com/2020/05/28/politics/wisconsin-absentee-voting-applications/index.html">Wisconsin approves measure to send absentee ballot applications to voters</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">topic 13</td>
<td style="text-align: left;">vaccine, immigration, migrants, testing, mask</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/migrant-encounters-southern-border-rise-again-biden-touted-immigration-policy-reforms">Migrant encounters at southern border on the rise again after Biden touted immigration policy reforms</a><br>
<a href="https://www.foxnews.com/politics/over-quarter-million-migrant-encounters-december-alone-cbp-confirms">Over quarter of a million migrant encounters in December alone, CBP confirms</a><br>
<a href="https://www.foxnews.com/politics/migrant-caravan-disbands-mexico-travel-permits-migrants">Massive migrant caravan disbands as Mexico hands out travel permits; migrants expected to head to US</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">topic 14</td>
<td style="text-align: left;">sentence, prison, prosecutors, arrested, lawsuit</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/wisconsin-lawmaker-says-bar-not-bad-establishment-4-patrons-overdose-fentanyl">Wisconsin lawmaker says his bar not a 'bad establishment' after 4 patrons overdose on fentanyl</a><br>
<a href="https://www.cnn.com/2020/04/21/politics/rick-gates-jail-sentence-home-coronavirus/index.html">Judge rules Rick Gates doesn’t have to spend days in jail during coronavirus pandemic</a><br>
<a href="https://www.cnn.com/2022/11/09/politics/navy-engineer-wife-conspiracy-submarine-sentence/index.html">US Navy engineer and wife sentenced for conspiring to sell classified information to foreign country</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">topic 15</td>
<td style="text-align: left;">harris, education, parents, students, gender</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/majority-americans-believe-gender-determined-birth-against-biological-males-womens-sports-poll">Majority of Americans believe gender determined at birth, against biological males in women's sports: poll</a><br>
<a href="https://www.cnn.com/2023/06/15/politics/texas-transgender-college-athletes-ban/index.html">Texas governor signs bill placing limits on transgender athletes in college sports</a><br>
<a href="https://www.cnn.com/2023/04/20/politics/house-transgender-sports-bill/index.html">House passes anti-trans sports bill</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">topic 02</td>
<td style="text-align: left;">mccarthy, pelosi, mcconnell, manchin, schumer</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2021/05/21/politics/voting-rights-bill-senate-democrats/index.html">Democrats searching for a path forward on stalled voting rights bill</a><br>
<a href="https://www.cnn.com/2023/04/18/politics/schumer-senate-feinstein-vote-cardin/index.html">GOP blocks Democratic effort to replace Feinstein on Judiciary panel</a><br>
<a href="https://www.cnn.com/2023/01/03/politics/jim-jordan-nominated-house-speaker/index.html">Jim Jordan nominated for speaker by conservative hardliners amid GOP infighting for House leadership</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">topic 03</td>
<td style="text-align: left;">abortion, v, appeals, roe, medical</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2023/08/16/politics/abortion-pill-mifepristone-5th-circuit/index.html">Appeals court says abortion pill mifepristone should remain on the market but rules in favor of limiting access</a><br>
<a href="https://www.cnn.com/2022/05/22/politics/asa-hutchinson-abortion-ban-revisited-cnntv/index.html">Arkansas’s GOP governor says state’s near-total abortion ban should be ‘revisited’ if Roe is reversed</a><br>
<a href="https://www.cnn.com/2022/07/20/politics/georgia-six-week-abortion-law/index.html">Federal appeals court allows Georgia’s six-week abortion ban to take effect immediately</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">topic 04</td>
<td style="text-align: left;">energy, afghanistan, air, climate, command</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2022/07/12/politics/us-isis-leaders-syria/index.html">ISIS leader in Syria killed in drone strike, US says</a><br>
<a href="https://www.foxnews.com/politics/afghanistan-6000-processed-evacuation-kabul-airport">Afghanistan collapse: State Dept says 6,000 people processed for evacuation at Kabul airport</a><br>
<a href="https://www.cnn.com/2022/09/15/politics/floating-offshore-wind-turbines-biden-climate/index.html">Biden administration announces plan to develop floating offshore wind turbines for West Coast</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">topic 05</td>
<td style="text-align: left;">desantis, sanders, carolina, endorsed, seat</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/trump-trailing-biden-in-6-key-battleground-states-according-to-new-polling">Trump trailing Biden in 6 key battleground states: polls</a><br>
<a href="https://www.foxnews.com/politics/2024-watch-tim-scott-laying-out-8-million-run-ads-key-early-gop-presidenital-nominating-states">2024 Watch: Tim Scott laying out $8 million to run ads in key early GOP presidential nominating states</a><br>
<a href="https://www.foxnews.com/politics/biden-on-top-in-iowa-caucuses">Biden on top in Iowa with 3 weeks until caucuses, latest poll shows</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">topic 06</td>
<td style="text-align: left;">fbi, intelligence, hunter, email, cuomo</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/james-baker-twitter-lawyer-fired-elon-musk-played-key-role-fbi-trump-russia-collusion-probe">James Baker, Twitter lawyer fired by Elon Musk, played key role in FBI's Trump-Russia collusion probe</a><br>
<a href="https://www.foxnews.com/politics/fbi-responds-twitter-files-disclosures-says-didnt-request-any-action-specific-tweets">FBI responds to Twitter Files disclosures, says it didn't request 'any action' on specific tweets</a><br>
<a href="https://www.foxnews.com/politics/graham-says-declassified-fbi-documents-show-double-standard-for-clinton-and-trump-campaigns">Graham says declassified FBI documents show 'double standard' for Clinton and Trump campaigns</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">topic 07</td>
<td style="text-align: left;">obama, words, always, thought, wrong</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/michelle-obama-says-she-couldnt-stand-barack-for-10-years">Michelle Obama says she 'couldn't stand' Barack for 10 years</a><br>
<a href="https://www.foxnews.com/politics/michelle-obama-recounts-uncontrollable-sobbing-leaving-white-house-last-time">Michelle Obama recounts 'uncontrollable sobbing' after leaving White House for last time</a><br>
<a href="https://www.cnn.com/2021/09/28/politics/trump-grisham-book-reaction/index.html">Donald Trump’s appalling response to a new tell-all book about his White House</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">topic 08</td>
<td style="text-align: left;">trial, impeachment, pence, indictment, prosecutors</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2023/02/14/politics/evan-corcoran-trump-attorney-testimony/index.html">Justice Department tells court there’s evidence of a crime in bid to force more answers from Trump attorney</a><br>
<a href="https://www.cnn.com/2023/07/30/politics/yuscil-taveras-trump-classified-documents-investigation/index.html">Mar-a-Lago employee overseeing surveillance cameras previously received target letter in Trump classified documents probe</a><br>
<a href="https://www.cnn.com/2022/01/28/politics/committee-subpoenas-14-republicans/index.html">January 6 committee subpoenas individuals tied to fake elector push</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">topic 09</td>
<td style="text-align: left;">tax, debt, loan, payments, inflation</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2023/09/05/politics/biden-student-loan-repayment-plan-save/index.html">4 million people enroll in Biden’s SAVE student loan repayment plan ahead of payment restart</a><br>
<a href="https://www.cnn.com/2021/05/15/politics/stimulus-check-2020-taxes/index.html">Stimulus checks and pandemic aid make it even more important to file a 2020 tax return</a><br>
<a href="https://www.cnn.com/2021/06/14/politics/child-tax-credit-low-income/index.html">Low-income Americans can now register for expanded child tax credit</a></td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</section>
<section id="assessing-fit" class="slide level3">
<h3>Assessing fit</h3>
<p>How do we know if a model is “good”? Do we need more topics?</p>
<ul>
<li><p>We can calculate the log likelihood for a given topic model, or we can use it to “predict” the text of unseen documents and check how it performs. (See the documentation on <code>seededlda</code>)</p></li>
<li><p>But there’s <a href="https://proceedings.neurips.cc/paper/2009/hash/f92586a25bb3145facd64ab20fd554ff-Abstract.html">some debate about whether these are useful</a>. The eyeball test may be a better starting point: run models with 20, 30, 50 (and 100 if you have a large corpus) and see if the topics are coherent.</p></li>
</ul>
</section>
<section id="trying-it-out" class="slide level3">
<h3>Trying it out</h3>
<p><a href="https://neilblund.github.io/GVPT628-Fall2024/Week%2010/LDA.html">Markdown</a></p>
</section>

<section id="variations" class="title-slide slide level2 center">
<h2>Variations</h2>
<p>One of the reasons for the popularity of LDA is that the basic generative framework is easy to extend by slightly changing some of the assumptions. There are a lot of variations on basic LDA.</p>
</section>
<section id="keyword-assisted-topic-models" class="slide level3">
<h3>Keyword Assisted Topic Models</h3>
<p>Keyword Assisted Topic Models (<a href="https://keyatm.github.io/keyATM/">Rpackage</a>, <a href="https://onlinelibrary-wiley-com.proxy-um.researchport.umd.edu/doi/10.1111/ajps.12779">paper</a>) allow some of the benefits of dictionary based models to inform the topic model.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="pseudocode-container quarto-float" data-line-number="true" data-caption-prefix="Algorithm" data-line-number-punc=":" data-pseudocode-number="1" data-comment-delimiter="//" data-no-end="false" data-indent-size="1.2em">
<div class="pseudocode">
\begin{algorithm} \begin{algorithmic} \Procedure{Key-ATM}{} \State Choose $\theta \sim \text{Dir}(\alpha)$ (document-topic probabilities) \State Choose $\phi \sim \text{Dir}(\beta)$ (topic-word probabilities) \State Choose $\tilde{\phi} \sim \text{Dir}(\beta)$ (topic-word probabilities for keyword topics) \State Choose $\pi \sim \text{Beta}(\gamma_1, \gamma_2$) (keyword prob. for each keyword topic) \For{each document $d$} \For{each word $w_{d,i}$} \State Sample a topic $k \sim \text{Categorical}(\theta_i)$ \If{$k$ is a non-keyword topic} \State Sample a word $w_{d,i} \sim \text{Categorical}(\phi_{k})$ \Else \State $s_{d,i} \sim \text{Bernoulli}(\pi_k)$ \If{$s_{d,i}=1$} \State Sample a word $w_{d,i} \sim \text{Categorical}(\tilde{\phi_k})$ \Else \State Sample a word $w_{d,i} \sim \text{Categorical}(\phi_k)$ \EndIf \EndIf \EndFor \EndFor \EndProcedure \end{algorithmic} \end{algorithm}
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Non-Keyword topics will work like traditional LDA</li>
<li>Keyword topics will draw from either <span class="math inline">\(\phi_k\)</span> (regular topic words) or <span class="math inline">\(\tilde{\phi}_k\)</span> (a distribution for topic keywords only) with the mixture determined by <span class="math inline">\(\pi_k\)</span></li>
<li>The result should be a gentle “nudge” for certain keyword topics to converge around the selected key terms.</li>
</ul>
</div>
</div>
</section>
<section id="key-atm-key-terms" class="slide level3">
<h3>Key-ATM: key terms</h3>
<p>We set up by creating a named list of topics and their associated keywords. The authors suggest we should look for terms that are reasonably common (&gt;.1%) while also being distinctive to the topic of interest.</p>
<p>(you can use the <code>key_viz</code> function to visualize the terms)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="fu">library</span>(keyATM) <span class="co"># keyword assisted topic models</span></span>
<span id="cb8-2"><a href=""></a><span class="co"># our news dictionary</span></span>
<span id="cb8-3"><a href=""></a>news_dict<span class="ot">&lt;-</span><span class="fu">list</span>(<span class="st">'covid'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'covid*'</span>, <span class="st">'vaccin*'</span>, <span class="st">'lockdown*'</span>, <span class="st">'coronavirus'</span>),</span>
<span id="cb8-4"><a href=""></a>                <span class="st">'natsec'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'afghan*'</span>, <span class="st">'taliban'</span>, <span class="st">'putin'</span>, </span>
<span id="cb8-5"><a href=""></a>                             <span class="st">'china'</span>, <span class="st">'ukrain*'</span>,<span class="st">'zelensky'</span>, <span class="st">'terror*'</span>),</span>
<span id="cb8-6"><a href=""></a>                <span class="st">'elections'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'election'</span>, <span class="st">'caucus'</span>, <span class="st">'primary'</span>, <span class="st">'debate*'</span>, </span>
<span id="cb8-7"><a href=""></a>                                <span class="st">'nomination'</span>, <span class="st">'midterm'</span>, <span class="st">'vote*'</span>, <span class="st">'poll*'</span>),</span>
<span id="cb8-8"><a href=""></a>                <span class="st">'hunter'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'hunter'</span>, <span class="st">'fbi'</span>),</span>
<span id="cb8-9"><a href=""></a>                <span class="st">'trump'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'indictment'</span>, <span class="st">'impeachment'</span>, <span class="st">'mar-a-lago'</span>),</span>
<span id="cb8-10"><a href=""></a>                <span class="st">'jan6'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"capitol"</span>, <span class="st">'january'</span>, <span class="st">'chansley'</span>,<span class="st">'fraud'</span>),</span>
<span id="cb8-11"><a href=""></a>                <span class="st">'blm'</span>  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'floyd'</span> , <span class="st">'black'</span>, <span class="st">'police'</span>, <span class="st">"protest*"</span>, <span class="st">'blm'</span>,<span class="st">'black.lives.matter'</span>),</span>
<span id="cb8-12"><a href=""></a>                <span class="st">'immigration'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'immigrat*'</span>,  <span class="st">'border'</span>, <span class="st">'homeland'</span>, <span class="st">'migrant*'</span>),</span>
<span id="cb8-13"><a href=""></a>                <span class="st">'climate'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'global'</span>,<span class="st">'climate*'</span>,<span class="st">'fuel'</span>, <span class="st">'carbon'</span>, <span class="st">'emission*'</span>),</span>
<span id="cb8-14"><a href=""></a>                <span class="st">'abortion'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'abort*'</span>,  <span class="st">'roe'</span>, <span class="st">'wade'</span>, <span class="st">'fetus'</span>, <span class="st">'dobbs'</span>),</span>
<span id="cb8-15"><a href=""></a>                <span class="st">'economy'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'inflation'</span>,<span class="st">'price*'</span>, <span class="st">'tax'</span>)</span>
<span id="cb8-16"><a href=""></a>                )</span>
<span id="cb8-17"><a href=""></a></span>
<span id="cb8-18"><a href=""></a><span class="co"># converted to a quanteda dictionary</span></span>
<span id="cb8-19"><a href=""></a>dict_topic<span class="ot">&lt;-</span><span class="fu">dictionary</span>(news_dict)</span>
<span id="cb8-20"><a href=""></a><span class="co"># convert the pol_dfm to a structure preferred by this package</span></span>
<span id="cb8-21"><a href=""></a>keyATM_docs<span class="ot">&lt;-</span><span class="fu">keyATM_read</span>(pol_dfm)</span>
<span id="cb8-22"><a href=""></a><span class="co"># convert the quanteda dictionary to a format used by keyATM </span></span>
<span id="cb8-23"><a href=""></a>keys<span class="ot">&lt;-</span><span class="fu">read_keywords</span>(<span class="at">docs =</span> keyATM_docs, <span class="at">dictionary =</span> dict_topic)</span>
<span id="cb8-24"><a href=""></a><span class="co"># you can visualize terms: </span></span>
<span id="cb8-25"><a href=""></a><span class="co"># key_viz &lt;- visualize_keywords(docs = keyATM_docs, keywords = keywords)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="key-atm-model" class="slide level3">
<h3>Key-ATM: model</h3>
<p>We’ll need to select the number of “non-keyword topics”. Key-ATM uses Gibbs sampling, so we also need to set a random number seed so we can replicate our results.</p>
<p>(we <em>could</em> also set hyper-parameter values with the <code>prior</code> argument, but the defaults here work reasonably well)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a>out <span class="ot">&lt;-</span> <span class="fu">keyATM</span>(</span>
<span id="cb9-2"><a href=""></a>  <span class="at">docs              =</span> keyATM_docs,    <span class="co"># text input</span></span>
<span id="cb9-3"><a href=""></a>  <span class="at">no_keyword_topics =</span> <span class="dv">5</span>,              <span class="co"># number of topics without keywords</span></span>
<span id="cb9-4"><a href=""></a>  <span class="at">keywords          =</span> keys,       <span class="co"># keywords</span></span>
<span id="cb9-5"><a href=""></a>  <span class="at">model             =</span> <span class="st">"base"</span>,         <span class="co"># select the model</span></span>
<span id="cb9-6"><a href=""></a>  <span class="at">options           =</span> <span class="fu">list</span>(<span class="at">seed =</span> <span class="dv">250</span>)</span>
<span id="cb9-7"><a href=""></a>)</span>
<span id="cb9-8"><a href=""></a></span>
<span id="cb9-9"><a href=""></a><span class="fu">saveRDS</span>(out, <span class="at">file =</span> <span class="st">"cnn_keyatm.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="key-atm-interpretation" class="slide level3">
<h3>Key-ATM: interpretation</h3>
<p>Interpretation for Key-ATM is more-or-less the same as the interpretation of a regular LDA model. The Key-ATM package has some nice utility functions for viewing our results.</p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">Top terms</a></li><li><a href="#tabset-2-2">Topic frequencies</a></li><li><a href="#tabset-2-3">Terms and documents</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="fu">top_words</span>(out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 16
   `1_covid`   `2_natsec`    `3_elections` `4_hunter` `5_trump` `6_jan6` `7_blm`
   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;  
 1 vaccine [✓] ukraine [✓]   sanders       fbi [✓]    impeachm… fraud [… protes…
 2 testing     china [✓]     carolina      hunter [✓] trial     mail     educat…
 3 mask        russia        seat          intellige… prosecut… elector… studen…
 4 virus       russian       endorsed      email      pence     pennsyl… violen…
 5 disease     putin [✓]     midterm [✓]   classified indictme… michigan parents
 6 mandate     chinese       iowa          doj        jury      mail-in  floyd …
 7 fauci       afghanistan … hampshire     counsel    witnesses lawsuit  racial 
 8 wearing     pentagon      scott         leak       subpoena  absentee civil  
 9 spread      troops        desantis      search     giuliani  cast     violent
10 medical     ukrainian [✓] caucus [✓]    materials  testified arizona  board  
# ℹ 9 more variables: `8_immigration` &lt;chr&gt;, `9_climate` &lt;chr&gt;,
#   `10_abortion` &lt;chr&gt;, `11_economy` &lt;chr&gt;, Other_1 &lt;chr&gt;, Other_2 &lt;chr&gt;,
#   Other_3 &lt;chr&gt;, Other_4 &lt;chr&gt;, Other_5 &lt;chr&gt;</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="fu">plot_topicprop</span>(out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="10_Text_Analysis_2_files/figure-revealjs/unnamed-chunk-16-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-3">
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table lightable-paper lightable-striped" data-quarto-postprocess="true" style="font-size: 10px; margin-left: auto; margin-right: auto; font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">topic</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">terms</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">documents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">10_abortion</td>
<td style="text-align: left;">abortion, v, roe, appeals, medical</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2022/06/30/politics/kentucky-abortion-bans-blocked/index.html">Kentucky state court blocks two state laws that stopped abortion services after Roe ruling</a><br>
<a href="https://www.cnn.com/2022/04/04/politics/colorado-abortion-rights-bill-governor-jared-polis-signs/index.html">Colorado governor signs bill to protect access to abortion</a><br>
<a href="https://www.cnn.com/2023/03/23/politics/florida-transgender-medical-ban-lawsuit/index.html">Florida sued over bans on gender-affirming care for transgender youth</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">11_economy</td>
<td style="text-align: left;">tax, debt, loan, payments, inflation</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2021/05/15/politics/stimulus-check-2020-taxes/index.html">Stimulus checks and pandemic aid make it even more important to file a 2020 tax return</a><br>
<a href="https://www.cnn.com/2021/06/14/politics/child-tax-credit-low-income/index.html">Low-income Americans can now register for expanded child tax credit</a><br>
<a href="https://www.cnn.com/2021/06/22/politics/child-tax-credit-irs-tools/index.html">IRS adds tools to help parents claim expanded child tax credit payments</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">1_covid</td>
<td style="text-align: left;">vaccine, testing, mask, virus, disease</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/biden-almost-everybody-covid-19-vaccine-summer">Biden says 'almost everybody' could have COVID-19 vaccines by 'the end of summer'</a><br>
<a href="https://www.cnn.com/2020/08/07/politics/donald-trump-coronavirus-vaccine-november-fact-check/index.html">Fact Check: Will there be a coronavirus vaccine by November?</a><br>
<a href="https://www.foxnews.com/politics/biden-vaccinated-booster-shots-covid-19-cdc-coronavirus">Biden urges unvaccinated to 'do the right thing,' after CDC boss defies panel over booster recommendations</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">2_natsec</td>
<td style="text-align: left;">ukraine, china, russia, russian, putin</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2022/02/04/politics/nato-and-us-planes-intercept-russians/index.html">US and NATO military airplanes intercept Russian airplanes over North Atlantic</a><br>
<a href="https://www.cnn.com/2023/02/07/politics/china-refuses-lloyd-austin-call-balloon/index.html">China refused conversation with US defense secretary following downing of suspected spy balloon</a><br>
<a href="https://www.cnn.com/2023/03/23/politics/syria-suspected-drone-strike-us-contractor-killed/index.html">Biden vows US will ‘forcefully protect our people’ as Iranian-backed groups launch more attacks on US troops in Syria</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">3_elections</td>
<td style="text-align: left;">sanders, carolina, seat, endorsed, midterm</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/trump-trailing-biden-in-6-key-battleground-states-according-to-new-polling">Trump trailing Biden in 6 key battleground states: polls</a><br>
<a href="https://www.cnn.com/2023/02/27/politics/elissa-slotkin-debbie-stabenow/index.html">Rep. Elissa Slotkin entering race to succeed retiring Michigan Democratic Sen. Debbie Stabenow</a><br>
<a href="https://www.cnn.com/2023/05/31/politics/chris-christie-2024/index.html">Christie to announce 2024 bid next Tuesday in New Hampshire</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">4_hunter</td>
<td style="text-align: left;">fbi, hunter, intelligence, email, classified</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/white-house-insists-no-political-interference-hunter-biden-probe-after-irs-whistleblower">White House insists no 'political interference' in Hunter Biden probe after IRS whistleblower comes forward</a><br>
<a href="https://www.foxnews.com/politics/fbi-biden-bribery-doc-irs-investigators-whistleblower-claims-influenced-politics">FBI Biden bribery doc never made it to IRS investigators, whistleblower claims: 'Influenced by politics'</a><br>
<a href="https://www.foxnews.com/politics/durham-sussmann-trial-baker-fbi-investigated-claims-trump-russian-bank-connection-nothing-there">Baker says FBI investigated Sussmann claims of Trump, Russian bank connection: 'There was nothing there'</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">5_trump</td>
<td style="text-align: left;">impeachment, trial, prosecutors, pence, indictment</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2023/08/07/politics/cannon-mar-a-lago-grand-jury/index.html">Judge Cannon asks about legality of using DC grand jury in Florida-based Mar-a-Lago case</a><br>
<a href="https://www.cnn.com/2023/06/06/politics/mark-meadows-grand-jury-trump-probe/index.html">Mark Meadows testified to federal grand jury in special counsel probe of Trump</a><br>
<a href="https://www.cnn.com/2023/09/06/politics/mar-a-lago-it-worker/index.html">Mar-a-Lago IT worker struck cooperation agreement with special counsel, his former lawyer says</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">6_jan6</td>
<td style="text-align: left;">fraud, mail, electoral, pennsylvania, michigan</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/wisconsin-voters-protection-voter-id-law">Wisconsin voters win protection against strict voter ID law</a><br>
<a href="https://www.foxnews.com/politics/sidney-powell-kraken-lawsuit-dismissed-georgia-michigan">Sidney Powell 'Kraken' lawsuit dismissed in Georgia after defeat in Michigan</a><br>
<a href="https://www.foxnews.com/politics/battleground-state-lawmakers-seek-law-changes-to-avoid-man-made-disaster-of-mail-in-ballot-delays">Battleground state lawmakers seek law changes to avoid 'man-made disaster' of mail-in ballot delays</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">7_blm</td>
<td style="text-align: left;">protests, education, students, violence, parents</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/trump-signs-executive-order-to-protect-american-monuments">Trump signs executive order to protect American monuments, memorials and statues</a><br>
<a href="https://www.foxnews.com/politics/riley-gaines-rips-nv-bill-punishing-schools-trans-athlete-policies-says-dems-want-girls-humiliated">Riley Gaines rips NV bill punishing schools for trans athlete policies, says Dems want girls 'humiliated'</a><br>
<a href="https://www.cnn.com/2020/06/07/politics/dc-mayor-protests-george-floyd/index.html">DC mayor says federal response to protests led to larger groups participating peacefully</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">8_immigration</td>
<td style="text-align: left;">immigration, migrants, homeland, illegal, dhs</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/migrant-caravan-disbands-mexico-travel-permits-migrants">Massive migrant caravan disbands as Mexico hands out travel permits; migrants expected to head to US</a><br>
<a href="https://www.foxnews.com/politics/massive-group-migrants-hits-texas-border-end-title-42-looms">Massive group of migrants hits Texas border as end of Title 42 looms</a><br>
<a href="https://www.foxnews.com/politics/migrant-encounters-southern-border-rise-again-biden-touted-immigration-policy-reforms">Migrant encounters at southern border on the rise again after Biden touted immigration policy reforms</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">9_climate</td>
<td style="text-align: left;">energy, climate, gas, prices, global</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2022/06/28/politics/solar-wind-fossil-fuel-jobs-report-climate/index.html">Fossil fuel industry cut jobs in 2021 despite growth in production, Energy Department reports</a><br>
<a href="https://www.foxnews.com/politics/new-mexico-feds-owed-6-2m-oil-company-pollution-settlement">New Mexico, feds owed $6.2M from oil company in pollution settlement</a><br>
<a href="https://www.cnn.com/2022/09/15/politics/floating-offshore-wind-turbines-biden-climate/index.html">Biden administration announces plan to develop floating offshore wind turbines for West Coast</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">Other_1</td>
<td style="text-align: left;">desantis, often, almost, strategy, example</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2021/09/10/politics/americans-biden-economy-coronavirus/index.html">Americans turn pessimistic amid concerns over economy and coronavirus</a><br>
<a href="https://www.foxnews.com/politics/half-of-all-americans-financially-impacted-by-coronavirus-poll">Half of all Americans financially impacted by coronavirus: poll</a><br>
<a href="https://www.cnn.com/2021/06/04/politics/coronavirus-pandemic-poll/index.html">Poll: Two-thirds of Americans say life is at least somewhat back to pre-pandemic normal</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Other_2</td>
<td style="text-align: left;">mcconnell, manchin, schumer, bipartisan, filibuster</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2023/04/18/politics/schumer-senate-feinstein-vote-cardin/index.html">GOP blocks Democratic effort to replace Feinstein on Judiciary panel</a><br>
<a href="https://www.foxnews.com/politics/senate-republicans-schumer-mcconnell-filibuster-flip-flop">Republicans blast Schumer, Dems for attacking filibuster they used to support: 'What's changed?'</a><br>
<a href="https://www.cnn.com/2023/05/09/politics/dianne-feinstein-returns-to-washington/index.html">Dianne Feinstein returns to the Capitol after extended absence</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">Other_3</td>
<td style="text-align: left;">cuomo, sexual, video, lady, visit</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/biden-harris-condolences-robert-trump-dead">Biden, Harris offer condolences, prayers for 'entire Trump family' after passing of Robert Trump</a><br>
<a href="https://www.foxnews.com/politics/glenn-greenwald-biden-sexual-assault-accuser-tara-reade">Glenn Greenwald: Biden sexual assault accuser Tara Reade ‘isn’t going away’</a><br>
<a href="https://www.foxnews.com/politics/peter-schweizer-kamala-harris-catholic-church-abuse">Author claims Harris 'deep-sixed' release of documents ID'ing clergy accused of sex abuse as city DA</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Other_4</td>
<td style="text-align: left;">gun, shooting, weapons, drug, firearms</td>
<td style="text-align: left;"><a href="https://www.cnn.com/2020/03/21/politics/fact-check-joe-biden-gun-control/index.html">Fact check: Joe Biden’s comments on gun control</a><br>
<a href="https://www.foxnews.com/politics/connecticut-gov-lamont-calls-more-gun-bans-higher-buying-age">Connecticut Gov. Lamont calls for more gun bans, higher buying age</a><br>
<a href="https://www.foxnews.com/politics/top-senator-assails-biden-letting-heroin-users-off-easy-while-turning-smokers-criminals">Top senator assails Biden for letting heroin users off easy while turning smokers into criminals</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">Other_5</td>
<td style="text-align: left;">mccarthy, obama, pelosi, wrong, democracy</td>
<td style="text-align: left;"><a href="https://www.foxnews.com/politics/biden-address-to-congress-not-a-state-of-the-union-speech">Why Biden's address to Congress is not a State of the Union speech</a><br>
<a href="https://www.foxnews.com/politics/rogers-confronting-gaetz-house-floor-completely-out-line-greene-says-lost-his-temper">Rogers confronting Gaetz on House floor 'completely out of line,' Greene says: 'Lost his temper'</a><br>
<a href="https://www.foxnews.com/politics/gop-anger-holdouts-grows-vote-against-mccarthy-damages-conference-ability-govern">GOP anger at holdouts grows: Any vote against McCarthy 'damages the conference and our ability to govern'</a></td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="key-atm-with-covariates" class="slide level3">
<h3>Key-ATM with covariates</h3>
<p>Key-ATM also allows us to include covariates that can influence the document-topic probabilities.</p>
<p>So, if we suspect that Fox News is more likely to cover a certain topic than CNN, we can specify a model that incorporates this information into the model training process.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a>out_covariates <span class="ot">&lt;-</span> <span class="fu">keyATM</span>(</span>
<span id="cb13-2"><a href=""></a>  <span class="at">docs              =</span> keyATM_docs,    <span class="co"># text input</span></span>
<span id="cb13-3"><a href=""></a>  <span class="at">no_keyword_topics =</span> <span class="dv">5</span>,              <span class="co"># number of topics without keywords</span></span>
<span id="cb13-4"><a href=""></a>  <span class="at">keywords          =</span> keys,       <span class="co"># keywords</span></span>
<span id="cb13-5"><a href=""></a>  <span class="at">model             =</span> <span class="st">"covariates"</span>,       </span>
<span id="cb13-6"><a href=""></a>  <span class="at">options           =</span> <span class="fu">list</span>(<span class="at">seed =</span> <span class="dv">250</span>),</span>
<span id="cb13-7"><a href=""></a>  <span class="at">model_settings =</span> <span class="fu">list</span>(<span class="at">covariates_data =</span> <span class="fu">docvars</span>(pol_dfm),</span>
<span id="cb13-8"><a href=""></a>                        <span class="at">covariates_formula =</span> <span class="sc">~</span> source</span>
<span id="cb13-9"><a href=""></a>                        )</span>
<span id="cb13-10"><a href=""></a>  </span>
<span id="cb13-11"><a href=""></a>  </span>
<span id="cb13-12"><a href=""></a>  </span>
<span id="cb13-13"><a href=""></a>)</span>
<span id="cb13-14"><a href=""></a></span>
<span id="cb13-15"><a href=""></a><span class="fu">saveRDS</span>(out_covariates, <span class="at">file =</span> <span class="st">"cnn_keyatm_covariates.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="key-atm-with-covariates-1" class="slide level3">
<h3>Key-ATM with covariates</h3>
<p>And now we can view our results:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a>strata_topic <span class="ot">&lt;-</span> <span class="fu">by_strata_DocTopic</span>(</span>
<span id="cb14-2"><a href=""></a>  out_covariates, <span class="at">by_var =</span> <span class="st">"sourceFox News"</span>,</span>
<span id="cb14-3"><a href=""></a>  <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"CNN"</span>, <span class="st">"Fox News"</span>)</span>
<span id="cb14-4"><a href=""></a>)</span>
<span id="cb14-5"><a href=""></a>fig_doctopic <span class="ot">&lt;-</span> <span class="fu">plot</span>(strata_topic, <span class="at">var_name =</span> <span class="st">"source"</span>, <span class="at">show_topic=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>))</span>
<span id="cb14-6"><a href=""></a>fig_doctopic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="10_Text_Analysis_2_files/figure-revealjs/unnamed-chunk-20-1.png" width="960" class="r-stretch"></section>

<section id="general-advice-for-topic-modeling" class="title-slide slide level2 center">
<h2>General advice for topic modeling</h2>
<ul>
<li><p>The minimum number of documents is usually around 400.</p></li>
<li><p>You’ll want to tokenize, remove punctuation, and stopwords.</p>
<ul>
<li><p>Some research finds that stemming is unnecessary or counter-productive for LDA, and term weights usually aren’t used.</p></li>
<li><p>Trimming common terms won’t necessarily make the model better, but it will make it converge faster.</p></li>
</ul></li>
<li><p>Try different numbers of topics and view your results. Consider trying different values for alpha as well.</p>
<ul>
<li>If you have long documents that cover a lot of subjects, a slightly higher value on alpha might be better</li>
</ul></li>
<li><p>For Key-ATM: stick to simple models. And try to find key terms that are common enough to be informative. Consider using a vanilla LDA to help you come up with key terms.</p></li>
</ul>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
<div class="reveal-header">
<div class="header-logo">
<img data-src="images/informal_seal_transparent.webp">
</div>
<div class="sc-title">
<p> </p>
</div>
<div class="header-text">

</div>
<div class="sb-title">
<p> </p>
</div>
</div>
</section>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="10_Text_Analysis_2_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="10_Text_Analysis_2_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
          let selectedAnnoteEl;
          const selectorForAnnotation = ( cell, annotation) => {
            let cellAttr = 'data-code-cell="' + cell + '"';
            let lineAttr = 'data-code-annotation="' +  annotation + '"';
            const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
            return selector;
          }
          const selectCodeLines = (annoteEl) => {
            const doc = window.document;
            const targetCell = annoteEl.getAttribute("data-target-cell");
            const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
            const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            const lines = annoteSpan.getAttribute("data-code-lines").split(",");
            const lineIds = lines.map((line) => {
              return targetCell + "-" + line;
            })
            let top = null;
            let height = null;
            let parent = null;
            if (lineIds.length > 0) {
                //compute the position of the single el (top and bottom and make a div)
                const el = window.document.getElementById(lineIds[0]);
                top = el.offsetTop;
                height = el.offsetHeight;
                parent = el.parentElement.parentElement;
              if (lineIds.length > 1) {
                const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                height = bottom - top;
              }
              if (top !== null && height !== null && parent !== null) {
                // cook up a div (if necessary) and position it 
                let div = window.document.getElementById("code-annotation-line-highlight");
                if (div === null) {
                  div = window.document.createElement("div");
                  div.setAttribute("id", "code-annotation-line-highlight");
                  div.style.position = 'absolute';
                  parent.appendChild(div);
                }
                div.style.top = top - 2 + "px";
                div.style.height = height + 4 + "px";
                div.style.left = 0;
                let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                if (gutterDiv === null) {
                  gutterDiv = window.document.createElement("div");
                  gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                  gutterDiv.style.position = 'absolute';
                  const codeCell = window.document.getElementById(targetCell);
                  const gutter = codeCell.querySelector('.code-annotation-gutter');
                  gutter.appendChild(gutterDiv);
                }
                gutterDiv.style.top = top - 2 + "px";
                gutterDiv.style.height = height + 4 + "px";
              }
              selectedAnnoteEl = annoteEl;
            }
          };
          const unselectCodeLines = () => {
            const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
            elementsIds.forEach((elId) => {
              const div = window.document.getElementById(elId);
              if (div) {
                div.remove();
              }
            });
            selectedAnnoteEl = undefined;
          };
            // Handle positioning of the toggle
        window.addEventListener(
          "resize",
          throttle(() => {
            elRect = undefined;
            if (selectedAnnoteEl) {
              selectCodeLines(selectedAnnoteEl);
            }
          }, 10)
        );
        function throttle(fn, ms) {
        let throttle = false;
        let timer;
          return (...args) => {
            if(!throttle) { // first call gets through
                fn.apply(this, args);
                throttle = true;
            } else { // all the others get throttled
                if(timer) clearTimeout(timer); // cancel #2
                timer = setTimeout(() => {
                  fn.apply(this, args);
                  timer = throttle = false;
                }, ms);
            }
          };
        }
          const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
          for (let i=0; i<annoteTargets.length; i++) {
            const annoteTarget = annoteTargets[i];
            const targetCell = annoteTarget.getAttribute("data-target-cell");
            const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
            const contentFn = () => {
              const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
              if (content) {
                const tipContent = content.cloneNode(true);
                tipContent.classList.add("code-annotation-tip-content");
                return tipContent.outerHTML;
              }
            }
            const config = {
              allowHTML: true,
              content: contentFn,
              onShow: (instance) => {
                selectCodeLines(instance.reference);
                instance.reference.classList.add('code-annotation-active');
                window.tippy.hideAll();
              },
              onHide: (instance) => {
                unselectCodeLines();
                instance.reference.classList.remove('code-annotation-active');
              },
              maxWidth: 300,
              delay: [50, 0],
              duration: [200, 0],
              offset: [5, 10],
              arrow: true,
              trigger: 'click',
              appendTo: function(el) {
                return el.parentElement.parentElement.parentElement;
              },
              interactive: true,
              interactiveBorder: 10,
              theme: 'light-border',
              placement: 'right',
              positionFixed: true,
              popperOptions: {
                modifiers: [
                {
                  name: 'flip',
                  options: {
                    flipVariations: false, // true by default
                    allowedAutoPlacements: ['right'],
                    fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                  },
                },
                {
                  name: 'preventOverflow',
                  options: {
                    mainAxis: false,
                    altAxis: false
                  }
                }
                ]        
              }      
            };
            window.tippy(annoteTarget, config); 
          }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
        <script type="text/javascript">
        (function(d) {
          d.querySelectorAll(".pseudocode-container").forEach(function(el) {
            let pseudocodeOptions = {
              indentSize: el.dataset.indentSize || "1.2em",
              commentDelimiter: el.dataset.commentDelimiter || "//",
              lineNumber: el.dataset.lineNumber === "true" ? true : false,
              lineNumberPunc: el.dataset.lineNumberPunc || ":",
              noEnd: el.dataset.noEnd === "true" ? true : false,
              titlePrefix: el.dataset.captionPrefix || "Algorithm"
            };
            pseudocode.renderElement(el.querySelector(".pseudocode"), pseudocodeOptions);
          });
        })(document);
        (function(d) {
          d.querySelectorAll(".pseudocode-container").forEach(function(el) {
            let captionSpan = el.querySelector(".ps-root > .ps-algorithm > .ps-line > .ps-keyword")
            if (captionSpan !== null) {
              let captionPrefix = el.dataset.captionPrefix + " ";
              let captionNumber = "";
              if (el.dataset.pseudocodeNumber) {
                captionNumber = el.dataset.pseudocodeNumber + " ";
                if (el.dataset.chapterLevel) {
                  captionNumber = el.dataset.chapterLevel + "." + captionNumber;
                }
              }
              captionSpan.innerHTML = captionPrefix + captionNumber;
            }
          });
        })(document);
        </script>
      
    

</body></html>